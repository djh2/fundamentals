<html>  <head>    <title>CS 2510 Spring 2012: Lab 2</title>  </head>    <h1>CS 2510 Spring 2012: Lab 2</h1><h3>copyright 2012 Felleisen, Proulx, et. al.</h3>    <body><h4>Goals</h4><p>The goals of this lab are to get familiar with our workenvironment: the <em>svn</em> repository, the <em>Eclipse IDE</em>,and the basics of running a program in Java-like languages. In thesecond part of the lab, (<strong>the one that really teaches yousomething</strong>) will focus on data definitions and examples in a simple subsetof Java language.</p><h1  class=section>1&nbsp;&nbsp;Setup of svn and EclipseWorkspace</h1><p>We start with designing data - designing classes of data that areconnected to each other in a systematic way, showing that the <em>Designrecipe for Data Definitions</em> can be used virually without changein a completely different language than we have used in the firstpart.</p><p>We start designing methods in the functional style, i.e., everymethod produces a new value (primitive or a new object) and makes nochanges in the existing data. This allows us to use a very simplelanguage, one where the only two statements are <code>return</code>and <code>if (condition) then statement else statement</code>.</p><p>The programs we provide give you examples of the progressively morecomplex data (class) definitions, and illustrate the design of methodsfor these <em>class Hierarchies</em>.</p><p>The design of methods followsthe same <em>Design Recipe</em> we have seen before. The onlydifference here is that for classes that represent a union type (forexample classes <code>Circle</code> and <code>Rectangle</code> thatare both a part of the union type <code>Shape</code>, the conditionalstatement used in <em>TeachScheme!</em> inventory/template is replaced by thedynamic dispatch into the class whose constructor has been used todefine the specific object.</p><p><strong>Managing your work</strong></p><p>Professional programmers need to keep track of the changes to their programs in a systematic way. Several different <em>version control systems</em> are designed to keep track of all changes in the program over its lifetime. They allow programmer to access their code from different computers, to return to an earlier version if the new changes prove to be ill conceived, and allow others to see what changes have been made over the lifetime of the program.a</p><p>We will use the <em>svn</em> version control system to manage the work of each homework pair. It will help you from loosing your work if a computer crashes, it will allow the partners to collaborate on the project, and will let us see your progress, aswell as the final completed project.</p><p>We will start the lab getting set up with the <em>svn</em>. Make sure you ask questions, try to submit at least a simple program to the system, and see how it handles your work.</p><p>First of all, you will need to have an CCIS user id.</p><p>Log into the lab computer using your CCIS credentials.</p><p>Open your web browser to the following web page for information on how to access your Unix/Linux directories. (likely not necessary, if you trust us)</p><p><a href="http://howto.ccs.neu.edu/howto/accounts-homedirs/home-directory-access-on-linux-and-windows/"> http://howto.ccs.neu.edu/howto/accounts-homedirs/home-directory-access-on-linux-and-windows/</a> </p><p>Navigate your way to the <code>Z:</code> drive. If you can't find <em>Computer</em> on the desktop, then double-click the <em>Recycle Bin</em> and click on <em>Computer</em> in the left pane, then double-click the network drive <em>myhome ... (Z:)</em>.</p><p>You should see the various directories and files that make up your Unix home directory. Right-click on the classes directory and select <em>SVN Checkout...</em> from the pop-up menu.</p><p>Visit this page to locate your HW partern's information:</p><p><a href="http://www.ccs.neu.edu/course/cs2510/lab-pairs.txt">http://www.ccs.neu.edu/course/cs2510/lab-pairs.txt</a></p><p>From there you should be able to locate your HW partner's information, and the number of your pair. Back to the checkout... for the URL of the repository, enter:</p><p><a href="https://trac.ccs.neu.edu/svn/cs2510spring2012/pairXXX">https://trac.ccs.neu.edu/svn/cs2510spring2012/pairXXX</a></p><p>where XXX is your pair number from the HW submission page. For the Checkout directory, enter:</p><p><em>Z:\classes\CS2510-Workspace</em></p><p>Or name it something you like better. Click OK. It should ask youfor your CCIS username and password. Once you enter those a and it'sfinished, click OK, then navigate into the classes directory. Youshould be able to see your new SVN workspace directory!</p><p></p><p class=noindent>Or name it something you like better. Click OK.  It shouldask you for your CCIS username and password.  Once you enter those aand it's finished, click OK, then navigate into the <tt>classes</tt>directory.  You should be able to see your new SVN workspacedirectory!</p><p>Create another directory in <tt>classes</tt> where you will keep alllibrary (JAR) files, call it <tt>EclipseJars</tt>.  For the rest ofthe Lab/term we will refer to these two directoriesas <em>EclipseWorkspace</em> and<em>EclipseJars</em>.  Keep the file/explorer window open, we'll beusing it later in the Lab.</p><p></p><a name="node_sec_1.2"></a><h2 class=section>1.2&nbsp;&nbsp;Eclipse IDE and a simpleJava-like language.</h2><p></p><p>Eclipse includes an editor and allows you to organize your work intomany files that together make up a <em>project</em>.  It has an"<em>incremental</em>" compiler that so you can edit and run yourprograms while getting relatively fast error feedback. Your Eclipse<em>workspace</em> can contain many projects, so you should be able tokeep all your work in one workspace, with one project for eachassignment or lab.</p><p></p><a name="node_sec_Temp_1"></a><h3 class=section>Setting up your workspace</h3><p>Start Eclipse.  It should ask you where you want your workspace tobe... so enter (or click <tt>Browse</tt> and navigate to) theworkspace directory you created (saw that coming). Feel free to checkthe "<em>Use this as the default...</em>" box.  Click OK.</p><p>Once Eclipse starts, close the annoying <em>Welcome</em> screen if itcomes up. </p><p></p><a name="node_sec_Temp_2"></a><h3 class=section>Zeroth things First</h3><p>There's a few settings we need to get out of the way before you start.If/when you work from your own computer you'll have to adjust thesesettings too, otherwise the graders might be angry... and you wouldn'tlike them when they're angry.</p><p>Select <tt>Preferences</tt> under the <tt>Window</tt> menu and changethe following settings. You should also be able to follow along withyour friendly Lab Leader.</p><p></p><ol><li><p>Type "<tt>tab</tt>" in the search box at the upper-left tominimize the available selections.</p><li><p>Select "<tt>Text Editors</tt>" on the left.  Make sure the"<tt>Insert spaces for tabs</tt>" check-box is checked.</p></li><li><p>Check the box "<tt>Show print margin</tt>" and select 80  spaces.</p><li><p>Check the box "<tt>Show line numbers</tt>"</p></li><li><p>When you say OK it will force you to create a name for theprofile... you can just say "<tt>Mine</tt>" or some other coolname.</p></li></ol><p></p><p>Great... now let's get on to Java-like programming!</p><p></p><a name="node_sec_Temp_3"></a><h3 class=section>Create a new project, and Check it into SVN</h3><p></p><ul><li><p>Select <tt>New &gt; Java Project</tt> from the <tt>File</tt>menu. Enter the name "<tt>last-Lab-02</tt>" but replace"<em>last</em>" with your last name. Under <tt>Projectlayout</tt> make sure the <em>Create separate folders forsources and class files</em> radio button is selected, then click<em>Finish</em>.</p><p></p><li><p>Your project should show up in the <em>Package Explorer</em>on the left (feel free to cheer at this point).</p></ul><p></p><p></p><p class=noindent>We will be submitting HWs via SVN through the <tt>Trac</tt>repository workspace that you just setup.</p><p>Go back to your file/explorer window, and enter your workspacefolder Your project directory should be visible... right-click on itand select <tt>TortoiseSVN &gt; Add...</tt>.  <strong>Uncheck allentries,</strong> then select the entries for the<strong>EclipseWorkspace</strong>, the <strong>Project</strong> folder, the<strong>src</strong> folder inside of the Project folder, and allfiles inside the <strong>src</strong> folder. Click OK, then click OK again,when the action completes.</p><p>Right-click the project directory again and select <tt>SVNCommit...</tt>.  Enter a message like "<tt>First checkin</tt>", thenclick OK.  In general the msage should be meaningful, so that yourpartner can tell what you were doing when you changed things.  Afterthe action completes you now have all you need to submitassignments!</p><p>See the <em>HW Handin</em> link off the course webpage for moreinformation and details on HW submission and organization.</p><p></p><a name="node_sec_Temp_4"></a><h3 class=section>A Java-like Experience</h3><p></p><ol><p></p><li><p>Now that you're an Eclipse and SVN expert, download the library we need for running the tests and examples from the lab's index page.</p><p><p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="tester.jar">tester.jar</a></Tt></P><P></p><p class=noindent>Save it --- but be careful --- on the bottom  of the window select <strong>Save As All Files</strong> not <em>Save  As WinArchive</em> --- save it in your <em>EclipseJars</em>  directory you have createdbefore.  The JAR provides output and testing functionality you sawin the lecture.</p><p>Right-click on your project directory in the <em>PackageExplorer</em> pane and select <tt>Build Path &gt; Add ExternalArchives...</tt>.  Navigate to your <tt>EclipseJars</tt> directoryand select your <tt>tester.jar</tt>.</p><p></p><li><p>Add the <tt>Shapes.java</tt> file to your project</p><p></p><ul><p></p><li><p>Download thefile <tt><a href="Shapes.java">Shapes.java</a></tt> form the lab indexpage and save it into the <tt>src</tt> directory within your projectdirectory, in your new workspace.  Then <em>right click</em> on yourproject in the <em>Package Explorer</em> and select<tt>Refresh</tt>.  You can also select the project and hit<tt>F5</tt>.</p><p></p><li><p>Alternatively, you can save it to a temporary directory andimport it using <tt>File &gt; Import...</tt>.  Select the<tt>General</tt> tab, <tt>File System</tt>, and click<tt>Next</tt>.  Browse to your temporary directory, select it, andfind your file. Make sure you put it into your project<tt>src</tt> directory.</p></ul><p></p><p></p><li><p>Set up an run configuration</p><p></p><ul><li><p>Highlight your project in the in the <em>Package Explorer</em>pane.</p><p></p><li><p>In the <em>Run</em> menu select <em>RunConfigurations...</em>. In the left pane select <tt>JavaApplication</tt>.</p><p></p><li><p>In the upper left corner click on the leftmost item (the iconwith the plus in the corner). When you mouse over it should show<em>New launch configuration</em>.</p><p></p><li><p>Make up a name for this configuration - usually the same asthe name of your project, lab, or assignment.</p><p></p><li><p>The <em>Project</em> field should be your current project(e.g., <tt>MyName-Lab-02</tt>), and in the <em>Main class</em> field enter<tt>tester.Main</tt>.</p><p></p><li><p>Click on the tab <tt>(x)= Arguments</tt>. In the<em>Program arguments</em> text field enter <tt>ExamplesShapes</tt>.  Later,when you define your own program, you will use the name of your  <em>Examples</em> class.</p><p></p><li><p>At the bottom of the <em>Run Configurations</em> select<em>Apply</em> then <em>Run</em>.</p></ul><p></p><p></p><p class=noindent>You should see a few messages in the <tt>Console</tt>, anda display of the <tt>ExamplesShapes</tt> class with the exampleinstance(s).</p><p>If the program does not run and reports that it cannot find<tt>java</tt> or <tt>javac</tt>, open your <em>RunConfiguration</em> and click on the tab <tt>Environment</tt> thenselect <tt>New</tt> and enter the following information:</p><p></p><ul><li><p>Name: PATH</p><p></p><li><p>Value: <tt>C:\Program Files\Java\jdk1.6.0_23\bin</tt>, which is the location of the Java Compileron the Lab machines, though at home yours will likely bedifferent.</p></ul><p></p><p>Then click OK and try running again.</p><p><li><p>View, Edit, and rerun <tt>Shapes.java</tt></p><ul><p></p><li><p>Unfold the <tt>default package</tt> under the <tt>src</tt>directory under your project in the <i>Package Explorer</i>.</p><p></p><li><p>You should see <tt>Shapes.java</tt>; double-click it, and thefile should open into an editing tab in the main pane.</p><p></p><li><p>Add new examples of <tt>Circle</tt> and <tt>Rect</tt> to the<tt>Examples</tt> class.  Make sure there are no errors orwarnings.</p><p></p><li><p>Now run the file again. make sure <tt>Shapes.java</tt> isshown in the main pane, then hit the green circle with the whitetriangle in the top toolbar.  You can also click and select yourconfiguration for the drop-down menu to the right of the Runbutton.</p></ul><p></p></ol><p></p><a name="node_sec_2"></a><h1 class=section>2&nbsp;&nbsp;Practice with FunJava</h1><p>We are building an <em>App</em> that will help us find places in acity. We first need to record addresses of interesting places.Here's a Racket data definition for an address:</p><p></p><pre class=verbatim>    <span class='com'>;; An Address is: (make-addr String Number String)</span>    (<span class='keyw'>define-struct</span> addr (street no city))    <span class='com'>;; Example Addresses:</span>    (<span class='keyw'>define</span> a1 (make-addr <span    class='str'>"Beacon"</span> <span class='num'>150</span> <span class='str'>Boston</span>))     (<span class='keyw'>define</span> a2 (make-addr <span    class='str'>"Boylston"</span> <span class='num'>150</span> <span class='str'>Boston</span>))    (<span class='keyw'>define</span> a3 (make-addr <span class='str'>"Chestnut"</span> <span class='num'>25</span> <span class='keyw'>Cambridge</span>))</pre><p></p><p></p><ol><p></p><li><p>Draw the class diagram for this data definition</p><p></p><li><p>Create a new file in your Eclipse Lab project named<tt>Address.java</tt> and convert the data definition/class diagraminto a <tt>FunJava</tt> class definition.</p><p></p><li><p>Create an <tt>Examples</tt> class, and include instances of<tt>Address</tt>s.  See <tt>Shapes.java</tt> for the necessaryformat(s).</p><p></p><li><p>Create a new <tt>Run Configuration</tt> and run the examples.</p><p></p></ol><p></p><p></p><a name="node_sec_2.1"></a><h2 class=section>2.1&nbsp;&nbsp;Classes containing classes</h2><p>We now want to keep track of hotels in the city. For each hotel we    need to know its name and its address. (We could include    additional information, but for now, this is sufficient. Note that    there may be a <em>Hilton</em> hotel at two different addresses    --- that is OK.</p><p></p><pre>    <span class='com'>;; A Hotel is: (make-hotel String Address)</span>    (<span class='keyw'>define-struct</span> hotel (name addr))    <span class='com'>;; Example Hotels:</span>    (<span class='keyw'>define</span> h1 (make-hotel <span class='str'>"Hilton"</span> <span class='keyw'>a1</span>))    (<span class='keyw'>define</span> h2 (make-hotel <span class='str'>"Hilton"</span> <span class='keyw'>a2</span>))     (<span class='keyw'>define</span> h3 (make-hotel <span class='str'>"Marriot"</span> <span class='keyw'>a3</span>))</pre><p></p><p></p><ol><p></p><li><p>Draw the class diagram for these data definitions</p><p></p><li><p>Add the <tt>Hotel</tt> class to your file and add the    corresponding data definitions.</p><p></p><p></p><li><p>Run the examples to make sure everything is correct.</p><p></p></ol><p></p><p></p><a name="node_sec_2.2"></a><h2 class=section>2.2&nbsp;&nbsp;Unions of Classes (of data)</h2><p>We certainly are interested in more than just hotels. We would like    to know about other attractions, for example restaurants (each has    a name and the type of food they serve, e.g. French, Mexican,    Italian, Vegetarian; we would like to be able to find movie    theaters (maybe with the number of show places each has), and    other attractions.</p><p>Create an <tt><b>interface</b></tt> to represent various kinds ofattractions call it <tt>IAttraction</tt>.  The union of classesof <tt>IAttraction</tt> will be made up of three different FunJava<tt><b>class</b></tt>es... feel as described above. Feel free to add    more information to each, or to add another class for your    favorite kind of atttration.</p><p><p>If you change the name of the class <tt>Hotel</tt> to    <tt>HotelAttr</tt> for the hotel data that are a part of the new    union, you canuse the same <tt>java</tt> file, just include new examples in your<tt>Examples</tt> class</p><p></p><ol><p></p><li><p>Draw a class diagram for the class hierarchy that representsthese three types of Attractions</p><p></p><li><p>Design data definitions (i.e., <tt><b>class</b></tt>es) foreach of the definitions (including the interface)</p><p></p><li><p>Add examples of each kind of <tt>IAttraction</tt> to your<tt>Examples</tt> class.  Be sure to use <tt>IAttraction</tt> as thetype of the example fields.</p><p></p></ol><p></p><p></p><a name="node_sec_2.3"></a><h2 class=section>2.3&nbsp;&nbsp;Self-Referential Class Hierarchies</h2><p>Remember the ancestor tree example from last semester?  Brings backfond memories of recursion doesn't it?  Let's re-live alittle... here's something like the definitions we had last semester:</p><p></p><pre>    <span class='com'>;; An Ancestor Tree (IAT) is one of:</span>    <span class='com'>;;  - 'unknown</span>    <span class='com'>;;  - (make-at String IAT IAT)</span>    (<span class='keyw'>define-struct</span> at (name mom dad))    <span class='com'>;; Example IATs:</span>    (<span class='keyw'>define</span> at1 (make-at 'nknown))    (<span class='keyw'>define</span> at2 (make-at "Pete" (make-at "Jan" at1) (make-at "John" (make-at "Mary" at1) at1)))</pre><p></p><p></p><ul><p></p><li><p>Draw the class diagram for <tt>IAT</tt>s and the relatedstructures.  <b>Hint</b>: rather than using a <tt>symbol</tt>, usea class without any fields.</p><p></p><li><p>Transform the diagram into class definitions</p><p></p><li><p>Make examples of <tt>IAT</tt>s and add them to your<tt>Examples</tt> class.  Use references to earlier fields (e.g.,<tt><span class='keyw'>this</span>.pete</tt>) to build your ancestor trees.</p><p></p><li><p>If you have some time left, try to define a list of attractions    in a similar way.</p></ul><p></p><p></p><a name="node_sec_3"></a><h1 class=section>3&nbsp;&nbsp;Wrapping up, checking in</h1><p>Last, but not least, save your file(s), and add them to SVN.  Rightclick on the file and choose <tt>TortoiseSVN &gt; Add...</tt>.  Whenyou're done select Commit for the entire workspace directory.</p><p><!--Create another directory in classes where you will keep all library (JAR) files, call it EclipseJars. For the rest of the Lab/term we will refer to these two directories as EclipseWorkspace and EclipseJars. Keep the file/explorer window open, we'll be using it later in the Lab.--> <hr></hr><!--<p>The nine programs cover the following topics:<ul>  <li><p>Book1.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A simple definition of one class with  examples of data and a drawing of the class diagram.</p></li>  <li><p>Book2.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An example of designing methods for a simple  class, including the <em>template</em> and tests.</p></li>  <li><p>Book3.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A class definition with a field that is an  instance of another class (reference).</p></li>  <li><p>Book4.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A class definition for a union of classes  (<em>i.e. classes that implement a common interface</em>), together  with the examples of designing methods for these classes. Here the  students first see the power of the <em>dynamic  dispatch.</em></p></li>  <li><p>Book5.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A class definition with a union (of a list  with no items and a list with at least one first item) that  represents a recursively defined list, together with examples of data.</p></li>  <li><p>Book6.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Designing methods for self-referential data  (lists). An example of the power of following the shape of the data  definitions.</p></li>  <li><p>Book7.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The conversion of the example of designing  methods for unions (<em>Book4</em>) into  one that uses an <code>abstract class</code> to eliminate the  unnecessary duplication.</p></li>  <li><p>Book8.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The motovation for designing  and using <em>function objects</em> -- classes that implement an  interface that represents functional behavior, so this can be passed  to another function.</p></li>  <li><p>Book9.java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An example that uses <em>function  objects</em> to eliminate the repetition in method definitions in  the previous example.</p></li>  </ul>--><hr></hr>  </body></html>