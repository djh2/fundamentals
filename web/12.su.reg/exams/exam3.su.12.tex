\documentclass[11pt]{article}

%% ------------------------------------------------------------------
%% SOLUTIONS:
\def\thel{\noindent\rule{2.5cm}{.5pt}}
\long\def\begsol#1 #2\endsol{#1}
%\def\begsol#1{\thel {\bf Solution} \thel}\def\endsol{\relax}
%%uncomment the above line to get the solutions printed

\newcommand\code[1]{\texttt{#1}}
\newcommand\bcode[1]{\texttt{\textbf{#1}}}

%% PROBLEMS:
\def\pts#1{\marginpar{\footnotesize \raggedright  \fbox{#1 {\sc Points}}}}
\newcounter{Pctr}
\newenvironment{problem}{\stepcounter{Pctr}%
\begin{description}
\item[\noindent{\bf Problem} \arabic{Pctr}] 
\end{description}}{\relax}
%% ------------------------------------------------------------------

%% SUBPARTS:
\newcounter{parts}
\renewcommand{\theparts}{\Alph}
%% ------------------------------------------------------------------

\begin{document}

\renewcommand{\theenumi}{\Alph{enumi}}
\setcounter{Pctr}{0}

%% ------------------------------------------------------------------

\vfill
\centerline{\Large CS 2510 Exam 3 -- Summer 2012}

~\\[2cm]

\begin{center}
\begin{tabular}{l@{\qquad}l}
Name:                        & \rule{200pt}{.1pt} \\[.5cm]
Student Id (last 4 digits):  & \rule{200pt}{.1pt} \\[.5cm]
\end{tabular}
\end{center}

\noindent\begin{minipage}{7.5cm} $\bullet$ Write down the answers in the
space provided. 

$\bullet$ You may use all syntax of Java that we have studied in
class.

$\bullet$ For tests you only need to provide the expression that
computes the actual value, connecting it with an arrow to the expected
value. For example \code{s.method() -> true} is sufficient.

$\bullet$ Remember that the phrase ``design a class'' or ``design a
method'' means more than just providing a definition. It means to
design them according to the \textbf{design recipe}.  You are
\textit{not} required to provide a method template unless the problem
specifically asks for one.  However, be prepared to struggle if you
choose to skip the template step.

\bigskip

\textit{Good luck!}
\end{minipage}\hfil\begin{minipage}[t]{4.5cm}
\begin{tabular}{|c|l@{\qquad\qquad}|r|}
\hline
\textbf{Score} &  & 45 \\ \hline
\end{tabular}
\end{minipage}

\vfill\thispagestyle{empty}
\newpage

%% -----------------------------------------------------------------------------
%% 
\pts{15}
\begin{problem}
We've seen multiple instances of objects representing functions, such
as predicates and comparison functions.  The general idea for
representing a function with contract {\tt A -> B} is to use an object
with an {\tt apply} method that consumes an {\tt A} and produces a
{\tt B}:

\begin{verbatim}
// Represents a function from A to B.
interface Fun<A,B> {
  // Apply this function to given argument.
  B apply(A a);
}
\end{verbatim}

Design an implementation of {\tt Fun<Posn,Double>} that calculates the
distance from the origin to the posn.  You may assume the following
data definition for {\tt Posn} (with the usual constructor):

\begin{verbatim}
// Represents a point on a Cartesian plane
class Posn {
  Integer x;
  Integer y;
}
\end{verbatim}

Hint: the distance between two points is given by
$\sqrt{(x_2-x_1)^2+(y_2-y_1)^2}$ and {\tt Math.sqrt} and {\tt
  Math.sqr} calculate what their names suggest.

\end{problem}
\newpage
\pts{15}
\begin{problem}
Assume the following definition for {\tt ListVisitor<X,R>}:

\begin{verbatim}
// Represents a computation over a list of X producing an R.
interface ListVisitor<X,R> {
  R visitEmpty();
  R visitCons(X first, List<X> rest);
}
\end{verbatim}

Design an implementation of {\tt ListVisitor<X,List<Y>>} that maps a
given function (of type {\tt Fun<X,Y>}) over a list of {\tt X} to
produce a list of {\tt Y}.

\end{problem}
\newpage

\pts{15}
\begin{problem}
Design an implementation of {\tt ListVisitor<X,X>} that produces the
first element of a non-empty list that minimizes the result of a given
{\tt Fun<X,Double>} function.  It should signal an error if the list
is empty.

For example, if given the distance function from problem 1 and a list
of {\tt Posn}s representing (4,5), (2,3), and (1,2), it should produce
the posn representing (1,2) since it closest to the origin (it
minimizes the distance function).

Hint: you should use an accumulator-based design and therefore may
need to develop two visitors.
\end{problem}
\newpage
\ 
\end{document}

